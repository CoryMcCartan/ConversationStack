<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
		<!-- MATERIAL DESIGN -->
		<link rel="stylesheet" href="css/angular-material.css">
		<link rel="stylesheet" href="css/md-colors.min.css">
        <link rel="stylesheet" type="text/css" href="css/fixes.css">
		<!-- OTHER CSS -->
        <link rel="stylesheet" type="text/css" href="css/fonts-import.css">
        <link rel="stylesheet" type="text/css" href="css/lowlevel.css">
        <link rel="stylesheet" type="text/css" href="css/animations.css">
        <link rel="stylesheet" type="text/css" href="css/main.css">
        <link rel="stylesheet" type="text/css" href="css/desktop-only.css" id="desktopStylesheet">
        <link rel="stylesheet" type="text/css" href="css/mobile-only.css" id="mobileStylesheet">
    </head>
    <body ng-app="conversation-stack" class="md-body-1" ng-controller="mainController" ng-csp is-mobile="{{isMobile}}">
		<!-- NAVIGATION DRAWER -->
		<md-sidenav id="sidenav" class="md-sidenav-left md-whiteframe-z3" md-component-id="menu">
			<md-content>
				<md-list class="md-body-2">
					<md-list-item>
						<md-button class="md-icon-button" ng-click="closeMenu()">
							<md-tooltip md-delay="600">back</md-tooltip>
							<md-icon>arrow_back</md-icon>
						</md-button>
						<p class="md-subhead">conversation-stack</p>
					</md-list-item>

						<md-divider></md-divider>

					<md-list-item ng-click="openView('main')" ng-class="styleCurrentView('main')">
						<md-icon ng-class="getTextColor('main')">forum</md-icon>
						<p>Talk</p>
					</md-list-item>
					<md-list-item ng-click="openView('plan')" ng-class="styleCurrentView('plan')">
						<md-icon ng-class="getTextColor('plan')">list</md-icon>
						<p>Plan</p>
					</md-list-item>
					<md-list-item ng-click="openView('review')" ng-class="styleCurrentView('review')">
						<md-icon ng-class="getTextColor('review')">history</md-icon>
						<p>Review</p>
					</md-list-item>

						<md-divider></md-divider>

					<md-list-item ng-click="openView('settings')" ng-class="styleCurrentView('settings')">
						<md-icon ng-class="getTextColor('settings')">settings</md-icon>
						<p>Settings</p>
					</md-list-item>
					<md-list-item ng-click="openView('help')" ng-class="styleCurrentView('help')">
						<md-icon ng-class="getTextColor('help')">help</md-icon>
						<p>Help and Feedback</p>
					</md-list-item>
				</md-list>
			</md-content>
		</md-sidenav>
		
		<!-- MAIN VIEW -->
		<section id="view_main" md-theme="main" class="view" style="display: block">
			<div id="container" layout="column">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary">
				<div class="md-toolbar-tools">
					<md-button id="menuButton" class="md-icon-button" ng-click="openMenu()">
						<md-tooltip md-delay="1000">menu</md-tooltip>
						<md-icon>menu</md-icon>
					</md-button>

					<h2 id="appTitle" class="draggable">Talk</h2>
					<span class="draggable" style="height: 100%" flex></span> <!--fills up space between L and R of screen -->

					<md-button class="md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>
			
			<!-- MAIN CONTENT, INCLUDING TABS -->
			<md-content id="tabContainer">
				<md-tabs class="md-primary md-whiteframe-z1" md-selected="selectedTabIndex"
					md-stretch-tabs="always" md-swipe-content md-no-disconnect>
					<!-- CONVERSATION -->
					<md-tab label="conversation" md-active="connectListeners()">
						<md-content layout-padding class="tabbed-content" ng-class="getBackgroundColor('main')">
							<md-card class="topic-item" ng-repeat="x in topics">
								<md-card-content>
									{{ x.name }}
								</md-card-content>
							</md-card>
							<div class="empty-message" ng-show="!topics.length">
								Start talking, and your conversation topics will appear here (most recent items first).
							</div>
						</md-content>
					</md-tab>
					<!-- AGENDA -->
					<md-tab label="agenda" md-active="connectListeners()">
						<md-content layout-padding class="tabbed-content">
							<md-card class="agenda-item ng-class: itemClass(x)" ng-repeat="x in agenda">
								<md-card-content>
									{{ x.name }}
								</md-card-content>
							</md-card>
							<div class="empty-message" ng-show="!agenda.length">
								No agenda.  Use the button below to load an agenda you've already planned.
							</div>
							
							<md-button class="md-fab md-fab-bottom-right" ng-click="openView('list')">
								<md-icon>open_in_browser</md-icon>
							</md-button>
						</md-content>
					</md-tab>
				</md-tabs>
			</md-content>
		</div>
		</section>
		
		<!-- PLAN VIEW -->
		<section id="view_plan" md-theme="plan" class="view">
			<div id="container" layout="column">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="menuButton" class="md-icon-button" ng-click="openMenu()">
						<md-tooltip md-delay="1000">menu</md-tooltip>
						<md-icon>menu</md-icon>
					</md-button>

					<h2 id="appTitle" class="draggable">Plan</h2>
					<span class="draggable" style="height: 100%" flex="{{ searching ? '0' : '1' }}"></span> <!--fills up space between L and R of screen -->
					<md-input-container md-no-float flex class="search-bar">
					<input type="text" ng-model="planSearch" placeholder="search" ng-focus="searching = true" ng-blur="searching = false" />
					</md-input-container>

					<md-button class="md-icon-button" id="close">
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>
			
			<!-- CONTENT -->
			<md-content layout-padding class="untabbed-content">
				<md-card class="plan-item" ng-repeat="x in planned | orderBy:'-date' | filter: planSearch">
					<md-card-content class="mdc-bg-green-200">
						<h2 class="md-title">{{ x.title }}</h2>
						<ul>
							<li ng-repeat="y in x.items">
								{{ y.name }}
							</li> 
						</ul>
						<md-divider></md-divider>
						<div class="md-actions" layout="row" layout-align="end center">
							<md-button class="md-icon-button" ng-click="editAgenda(x)">
								<md-tooltip md-delay="600">edit</md-tooltip>
								<md-icon>edit</md-icon>
							</md-button>
							<md-button class="md-icon-button" ng-click="loadAgenda(x)">
								<md-tooltip md-delay="600">load</md-tooltip>
								<md-icon>open_in_browser</md-icon>
							</md-button>
							<md-button class="md-icon-button" ng-click="deleteAgenda(x)">
								<md-tooltip md-delay="600">delete</md-tooltip>
								<md-icon>delete</md-icon>
							</md-button>
							<span flex="isMobile ? 1 : 0"></span>
						</div>
					</md-card-content>
				</md-card>

				<div class="empty-message" ng-show="!planned.length">
					No conversations planned. Use the create button below to start an agenda.
				</div>

				<md-button class="md-fab md-fab-bottom-right" ng-click="createAgenda()">
					<md-icon>add</md-icon>
				</md-button>
			</md-content>
			</div> 
		</section>
		
		<!-- REVIEW VIEW -->
		<section id="view_review" md-theme="review" class="view">
			<div id="container" layout="column">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="menuButton" class="md-icon-button" ng-click="openMenu()">
						<md-tooltip md-delay="1000">menu</md-tooltip>
						<md-icon>menu</md-icon>
					</md-button>

					<h2 id="appTitle" class="draggable">Review</h2>
					<span class="draggable" style="height: 100%" flex="{{ searching ? '0' : '1' }}"></span> <!--fills up space between L and R of screen -->
					<md-input-container md-no-float flex class="search-bar dark">
						<input type="text" ng-model="reviewSearch" placeholder="search" ng-focus="searching = true" ng-blur="searching = false" />
					</md-input-container>

					<md-button class="md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>

			<!-- CONTENT -->
			<md-content layout-padding class="untabbed-content">
				<md-card class="plan-item" ng-repeat="x in history | orderBy:'-date' | filter: reviewSearch track by x.date">
					<md-card-content class="mdc-bg-amber-200">
						<h2 class="md-title">{{ x.date | date: 'EEEE, MMMM d' }}</h2>
						<ul>
							<li ng-repeat="y in x.items">
								{{ y.name }}
							</li>
						</ul>
						<md-divider></md-divider>
						<div class="md-actions" layout="row" layout-align="end center">
							<md-button class="md-icon-button" ng-click="deleteConversation(x)">
								<md-tooltip md-delay="600">delete</md-tooltip>
								<md-icon>delete</md-icon>
							</md-button>
							<span flex="isMobile ? 1 : 0"></span>
						</div>
					</md-card-content>
				</md-card>
			</md-content>
			</div>
		</section>
		
		<!-- SETTINGS VIEW -->
		<section id="view_settings" md-theme="settings" class="view">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="backButton" class="md-icon-button" ng-click="back()">
						<md-tooltip md-delay="600">back</md-tooltip>
						<md-icon>arrow_back</md-icon>
					</md-button>

					<h2 id="appTitle" class="draggable">Settings</h2>
					<span class="draggable" style="height: 100%" flex></span> <!--fills up space between L and R of screen -->

					<md-button class="md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>

			<!-- CONTENT -->
			<md-content class="untabbed-content">
				<md-list>
					<md-list-item>
						<md-icon>sync</md-icon>
						<p>Sync data with Google Account</p>
						<md-switch ng-model="settings.syncData"></md-switch>
					</md-list-item>
					<md-divider></md-divider>
					<md-list-item ng-click="deleteAllData()">
						<md-icon>remove_circle</md-icon>
						<p>Delete all data</p>
					</md-list-item>
				</md-list>
			</md-content>
		</section>
		
		<!-- HELP AND FEEDBACK VIEW -->
		<section id="view_help" md-theme="help" class="view">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="backButton" class="md-icon-button" ng-click="back()">
						<md-tooltip md-delay="600">back</md-tooltip>
						<md-icon>arrow_back</md-icon>
					</md-button>

					<h2 id="appTitle" class="draggable">Help and Feedback</h2>
					<span class="draggable" style="height: 100%" flex></span> <!--fills up space between L and R of screen -->

					<md-button class="md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>
			
			<!-- CONTENT -->
			<md-content layout-padding class="untabbed-content">
				<div class="empty-message">No help text yet.  Sorry for the inconvenience.</div>
			</md-content>
		</section>

		<!-- LIST SELECTION VIEW -->
		<section id="view_list" md-theme="list" class="view">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="backButton" class="md-icon-button" ng-click="back()">
						<md-tooltip md-delay="600">back</md-tooltip>
						<md-icon>arrow_back</md-icon>
					</md-button>
						
					<h2 id="appTitle" class="draggable">Open Agenda</h2>
					<span class="draggable" style="height: 100%" flex="{{ searching ? '0' : '1' }}"></span>
					<md-input-container md-no-float flex class="search-bar dark">
						<input type="text" ng-model="loadSearch" placeholder="search" ng-focus="searching = true" ng-blur="searching = false" />
					</md-input-container>

					<md-button class=md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>

			<!-- CONTENT -->
			<md-content>
				<md-list>
					<md-list-item ng-repeat="x in planned | orderBy: '-date' | filter: loadSearch" ng-click="loadAgenda(x)">
						<span class="md-body-2">{{ x.title }}</span>
						<md-divider></md-divider>
					</md-list-item>
				</md-list>
			</md-content>
		</section>

		<!-- EDIT AGENDA VIEW -->
		<section id="view_edit" md-theme="edit" class="view">
			<!-- MAIN TOOLBAR -->
			<md-toolbar class="md-primary md-whiteframe-z1">
				<div class="md-toolbar-tools">
					<md-button id="backButton" class="md-icon-button" ng-click="back()">
						<md-tooltip md-delay="600">back</md-tooltip>
						<md-icon>arrow_back</md-icon>
					</md-button>
						
					<h2 id="appTitle" class="draggable">Edit</h2>
					<span class="draggable" style="height: 100%" flex></span>

					<md-button class="md-icon-button" ng-click="saveEdit()">
						<md-tooltip md-delay="600">done</md-tooltip>
						<md-icon>done</md-icon>
					</md-button>
					<md-button class=md-icon-button" id="close">
						<md-tooltip md-delay="600">close</md-tooltip>
						<md-icon>close</md-icon>
					</md-button>
				</div>
			</md-toolbar>

			<!-- CONTENT -->
			<md-content layout-padding class="stretch-fill" layout="column">
				<md-input-container>
					<label>Title</label>
					<input ng-model="activeEdit.title">
				</md-input-container>
				<md-input-container flex md-no-float>
					<textarea ng-model="activeEdit.text" placeholder="Agenda"></textarea>
				</md-input-container>
			</md-content>
		</section>
		
		<!-- JS -->
        <script type="text/javascript" src="js/model.js"></script>
        <script type="text/javascript" src="js/controller.js"></script>
        <script type="text/javascript" src="js/angular.min.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" src="js/sound.js"></script>
		<script type="text/javascript" src="js/nlp.min.js"></script>
		<script src="js/angular-material.min.js"></script>
		<script src="js/angular-animate.min.js"></script>
		<script src="js/angular-aria.min.js"></script>
	</body>
</html>
